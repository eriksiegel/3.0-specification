<section xmlns="http://docbook.org/ns/docbook"
         xmlns:e="http://www.w3.org/1999/XSL/Spec/ElementSyntax"
         xmlns:p="http://www.w3.org/ns/xproc"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xml:id="c.run">
<title>p:run</title>

<para>The <tag>p:run</tag> step runs a dynamically loaded pipeline.</para>

<p:declare-step type="p:run">
  <p:input port="source" primary="true" sequence="true" content-types="*/*"/>
  <p:output port="result" primary="true" content-types="*/*"/>
</p:declare-step>

<para>THIS IS UNREVIEWED PLACHOLDER TEXT</para>

<para>The <tag>p:run</tag> step functions mostly like an atomic step in that
you can define inputs connections and option values for it. However,
unlike atomic steps, it has no defined signature. Any inputs are
allowed and any outputs may be connected.
</para>

<para>One input port is specifically designated the pipeline input
port. By default, that port is named <port>pipeline</port>, but its
name can be changed by specifying a different name in the
<option>p:pipeline</option> option.
</para>

<para>The pipeline input port must be connected. It is a static error
(XSxxxx) if the pipeline port is not connected. The <tag>p:run</tag> step
expects a single pipeline document on the pipeline port. It is a
dynamic error (XDxxxx) if the input document is not a pipeline.
</para>

<para>The pipeline that appears on the pipeline port is evaluated
using the inputs and options specified on the <tag>p:run</tag> step.
It is a dynamic error (XDxxxx) if the pipeline has inputs that are not
specified on the <tag>p:run</tag> step. It is also a dynamic error
(XDxxxx) if the pipeline has required options that are not specifed on
the <tag>p:run</tag> step.
</para>

<para>The outputs of the pipeline appear on the correspondingly named output
ports of the <tag>p:run</tag> step. If the pipeline has an output is
not bound on the <tag>p:run</tag> step, that output is discarded. If
the <tag>p:run</tag> step has an output port that is not provided by
the pipeline, an empty sequence appears on that port.
</para>

<para>The <tag>p:run</tag> step is assumed to have a primary output port. If
the pipeline evaluated does not have a primary output port, an empty
sequence appears on that port. (Alternatively, that could be a dynamic
error)
</para>

</section>
